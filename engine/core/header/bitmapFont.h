//
// Created by augus on 03.01.2026.
//

#ifndef SCHACHENGINE_BITMAPFONT_H
#define SCHACHENGINE_BITMAPFONT_H

#endif //SCHACHENGINE_BITMAPFONT_H

#pragma once
#include <cstdint>
#include <string>
#include <vector>

namespace Engine {
    // Vielen Dank an DeepSeek.
    // gar kein bock nochmal mit fonts zu kämpfen

    class BitmapFont {
    private:
        const uint8_t (*fontData)[8];      // Monochrom-Bitmap (0=leer, 1=Pixel)
        int charWidth;                // Breite eines Zeichens
        int charHeight;               // Höhe eines Zeichens

    public:
        BitmapFont(const uint8_t (*data)[8], int cw, int ch)
        : fontData(data), charWidth(cw), charHeight(ch) {}

        // Zeichnet Text mit deinem Framebuffer-System
        void drawText(std::vector<uint32_t>& framebuffer, int fbWidth, int fbHeight,
                 const std::string& text, int x, int y, uint32_t color) {

            int currentX = x;
            int currentY = y;

            for (char c : text) {
                if (c == ' ') {
                    currentX += charWidth + 1;
                    continue;
                }
                if (c == '\n') {
                    currentX = x;
                    currentY += charHeight + 2;
                    continue;
                }

                if (c >= 32 && c <= 126) {
                    int charIdx = c - 32;

                    // Direkt auf das 2D-Array zugreifen
                    const uint8_t* charData = fontData[charIdx];

                    // 8 Zeilen des Zeichens zeichnen
                    for (int row = 0; row < charHeight; row++) {
                        uint8_t rowByte = charData[row];

                        // 8 Bits (Pixel) dieser Zeile zeichnen
                        for (int bit = 0; bit < charWidth; bit++) {
                            // Bit von links nach rechts prüfen
                            if (rowByte & (0x80 >> bit)) {
                                int px = currentX + bit;
                                int py = currentY + row;

                                if (px >= 0 && px < fbWidth && py >= 0 && py < fbHeight) {
                                    framebuffer[py * fbWidth + px] = color;
                                }
                            }
                        }
                    }
                    currentX += charWidth + 1;
                }
            }
        }

        // Hilfsfunktionen
        int getCharWidth() const { return charWidth; }
        int getCharHeight() const { return charHeight; }


    };
    static const uint8_t SIMPLE_FONT[95][8] = {
    // Space (32)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
    // ! (33)
    {0x18, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x18, 0x00},
    // " (34)
    {0x6C, 0x6C, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00},
    // # (35)
    {0x6C, 0x6C, 0xFE, 0x6C, 0xFE, 0x6C, 0x6C, 0x00},
    // $ (36)
    {0x18, 0x3E, 0x60, 0x3C, 0x06, 0x7C, 0x18, 0x00},
    // % (37)
    {0x00, 0x66, 0xAC, 0xD8, 0x36, 0x6A, 0xCC, 0x00},
    // & (38)
    {0x38, 0x6C, 0x68, 0x76, 0xDC, 0xCE, 0x7B, 0x00},
    // ' (39)
    {0x18, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00},
    // ( (40)
    {0x0C, 0x18, 0x30, 0x30, 0x30, 0x18, 0x0C, 0x00},
    // ) (41)
    {0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x18, 0x30, 0x00},
    // * (42)
    {0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00},
    // + (43)
    {0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x00},
    // , (44)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x30},
    // - (45)
    {0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00},
    // . (46)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00},
    // / (47)
    {0x03, 0x06, 0x0C, 0x18, 0x30, 0x60, 0xC0, 0x00},

    // Zahlen 0-9 (48-57)
    {0x3C, 0x66, 0x6E, 0x76, 0x66, 0x66, 0x3C, 0x00}, // 0
    {0x18, 0x38, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00}, // 1
    {0x3C, 0x66, 0x06, 0x0C, 0x30, 0x60, 0x7E, 0x00}, // 2
    {0x3C, 0x66, 0x06, 0x1C, 0x06, 0x66, 0x3C, 0x00}, // 3
    {0x0E, 0x1E, 0x36, 0x66, 0x7F, 0x06, 0x06, 0x00}, // 4
    {0x7E, 0x60, 0x7C, 0x06, 0x06, 0x66, 0x3C, 0x00}, // 5
    {0x3C, 0x66, 0x60, 0x7C, 0x66, 0x66, 0x3C, 0x00}, // 6
    {0x7E, 0x66, 0x0C, 0x18, 0x18, 0x18, 0x18, 0x00}, // 7
    {0x3C, 0x66, 0x66, 0x3C, 0x66, 0x66, 0x3C, 0x00}, // 8
    {0x3C, 0x66, 0x66, 0x3E, 0x06, 0x66, 0x3C, 0x00}, // 9

    // : (58)
    {0x00, 0x18, 0x18, 0x00, 0x00, 0x18, 0x18, 0x00},
    // ; (59)
    {0x00, 0x18, 0x18, 0x00, 0x00, 0x18, 0x18, 0x30},
    // < (60)
    {0x0C, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0C, 0x00},
    // = (61)
    {0x00, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x00, 0x00},
    // > (62)
    {0x30, 0x18, 0x0C, 0x06, 0x0C, 0x18, 0x30, 0x00},
    // ? (63)
    {0x3C, 0x66, 0x06, 0x0C, 0x18, 0x00, 0x18, 0x00},
    // @ (64)
    {0x3C, 0x66, 0x6E, 0x6A, 0x6E, 0x60, 0x3C, 0x00},

    // Großbuchstaben A-Z (65-90)
    {0x3C, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x66, 0x00}, // A
    {0x7C, 0x66, 0x66, 0x7C, 0x66, 0x66, 0x7C, 0x00}, // B
    {0x3C, 0x66, 0x60, 0x60, 0x60, 0x66, 0x3C, 0x00}, // C
    {0x78, 0x6C, 0x66, 0x66, 0x66, 0x6C, 0x78, 0x00}, // D
    {0x7E, 0x60, 0x60, 0x78, 0x60, 0x60, 0x7E, 0x00}, // E
    {0x7E, 0x60, 0x60, 0x78, 0x60, 0x60, 0x60, 0x00}, // F
    {0x3C, 0x66, 0x60, 0x6E, 0x66, 0x66, 0x3C, 0x00}, // G
    {0x66, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x66, 0x00}, // H
    {0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00}, // I
    {0x1E, 0x0C, 0x0C, 0x0C, 0x0C, 0x6C, 0x38, 0x00}, // J
    {0x66, 0x6C, 0x78, 0x70, 0x78, 0x6C, 0x66, 0x00}, // K
    {0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x7E, 0x00}, // L
    {0x63, 0x77, 0x7F, 0x6B, 0x63, 0x63, 0x63, 0x00}, // M
    {0x66, 0x76, 0x7E, 0x7E, 0x6E, 0x66, 0x66, 0x00}, // N
    {0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00}, // O
    {0x7C, 0x66, 0x66, 0x7C, 0x60, 0x60, 0x60, 0x00}, // P
    {0x3C, 0x66, 0x66, 0x66, 0x76, 0x6C, 0x36, 0x00}, // Q
    {0x7C, 0x66, 0x66, 0x7C, 0x6C, 0x66, 0x66, 0x00}, // R
    {0x3C, 0x66, 0x60, 0x3C, 0x06, 0x66, 0x3C, 0x00}, // S
    {0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00}, // T
    {0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00}, // U
    {0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x00}, // V
    {0x63, 0x63, 0x6B, 0x7F, 0x77, 0x63, 0x63, 0x00}, // W
    {0x66, 0x66, 0x3C, 0x18, 0x3C, 0x66, 0x66, 0x00}, // X
    {0x66, 0x66, 0x66, 0x3C, 0x18, 0x18, 0x18, 0x00}, // Y
    {0x7E, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x7E, 0x00}, // Z

    // [ (91)
    {0x3C, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3C, 0x00},
    // \ (92)
    {0xC0, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x03, 0x00},
    // ] (93)
    {0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3C, 0x00},
    // ^ (94)
    {0x18, 0x3C, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00},
    // _ (95)
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF},
    // ` (96)
    {0x30, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00},

    // Kleinbuchstaben a-z (97-122)
    {0x00, 0x00, 0x3C, 0x06, 0x3E, 0x66, 0x3E, 0x00}, // a
    {0x60, 0x60, 0x7C, 0x66, 0x66, 0x66, 0x7C, 0x00}, // b
    {0x00, 0x00, 0x3C, 0x66, 0x60, 0x66, 0x3C, 0x00}, // c
    {0x06, 0x06, 0x3E, 0x66, 0x66, 0x66, 0x3E, 0x00}, // d
    {0x00, 0x00, 0x3C, 0x66, 0x7E, 0x60, 0x3C, 0x00}, // e
    {0x1C, 0x36, 0x30, 0x78, 0x30, 0x30, 0x30, 0x00}, // f
    {0x00, 0x00, 0x3E, 0x66, 0x66, 0x3E, 0x06, 0x7C}, // g
    {0x60, 0x60, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x00}, // h
    {0x18, 0x00, 0x38, 0x18, 0x18, 0x18, 0x3C, 0x00}, // i
    {0x0C, 0x00, 0x1C, 0x0C, 0x0C, 0x0C, 0x6C, 0x38}, // j
    {0x60, 0x60, 0x66, 0x6C, 0x78, 0x6C, 0x66, 0x00}, // k
    {0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00}, // l
    {0x00, 0x00, 0x66, 0x7F, 0x7F, 0x6B, 0x63, 0x00}, // m
    {0x00, 0x00, 0x7C, 0x66, 0x66, 0x66, 0x66, 0x00}, // n
    {0x00, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x00}, // o
    {0x00, 0x00, 0x7C, 0x66, 0x66, 0x7C, 0x60, 0x60}, // p
    {0x00, 0x00, 0x3E, 0x66, 0x66, 0x3E, 0x06, 0x06}, // q
    {0x00, 0x00, 0x7C, 0x66, 0x60, 0x60, 0x60, 0x00}, // r
    {0x00, 0x00, 0x3E, 0x60, 0x3C, 0x06, 0x7C, 0x00}, // s
    {0x30, 0x30, 0x7C, 0x30, 0x30, 0x30, 0x1C, 0x00}, // t
    {0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x3E, 0x00}, // u
    {0x00, 0x00, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x00}, // v
    {0x00, 0x00, 0x63, 0x6B, 0x7F, 0x7F, 0x36, 0x00}, // w
    {0x00, 0x00, 0x66, 0x3C, 0x18, 0x3C, 0x66, 0x00}, // x
    {0x00, 0x00, 0x66, 0x66, 0x66, 0x3E, 0x06, 0x7C}, // y
    {0x00, 0x00, 0x7E, 0x0C, 0x18, 0x30, 0x7E, 0x00}, // z

    // { (123)
    {0x0C, 0x18, 0x18, 0x70, 0x18, 0x18, 0x0C, 0x00},
    // | (124)
    {0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00},
    // } (125)
    {0x30, 0x18, 0x18, 0x0E, 0x18, 0x18, 0x30, 0x00},
    // ~ (126)
    {0x00, 0x00, 0x70, 0xDB, 0x0E, 0x00, 0x00, 0x00}
};
//     static const uint8_t SIMPLE_FONT[95][8] = {
//     // Space (32)
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // ! (33)
//     {0x20, 0x20, 0x20, 0x20, 0x00, 0x20, 0x00},
//     // " (34) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // # (35) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // $ (36) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // % (37) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // & (38) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // ' (39) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // ( (40) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // ) (41) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // * (42) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//     // + (43)
//     {0x00, 0x20, 0x20, 0x70, 0x20, 0x20, 0x00},
//     // , (44)
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x40},
//     // - (45)
//     {0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00},
//     // . (46)
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00},
//     // / (47) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//
//     // Zahlen 0-9 (48-57) - WICHTIG!
//     {0x70, 0x88, 0x98, 0xA8, 0xC8, 0x88, 0x70}, // 0
//     {0x20, 0x60, 0x20, 0x20, 0x20, 0x20, 0x70}, // 1
//     {0x70, 0x88, 0x08, 0x10, 0x20, 0x40, 0xF8}, // 2
//     {0x70, 0x88, 0x08, 0x30, 0x08, 0x88, 0x70}, // 3
//     {0x10, 0x30, 0x50, 0x90, 0xF8, 0x10, 0x10}, // 4
//     {0xF8, 0x80, 0xF0, 0x08, 0x08, 0x88, 0x70}, // 5
//     {0x70, 0x88, 0x80, 0xF0, 0x88, 0x88, 0x70}, // 6
//     {0xF8, 0x08, 0x10, 0x20, 0x40, 0x40, 0x40}, // 7
//     {0x70, 0x88, 0x88, 0x70, 0x88, 0x88, 0x70}, // 8
//     {0x70, 0x88, 0x88, 0x78, 0x08, 0x88, 0x70}, // 9
//
//     // : (58)
//     {0x00, 0x20, 0x00, 0x00, 0x00, 0x20, 0x00},
//     // ; (59)
//     {0x00, 0x20, 0x00, 0x00, 0x00, 0x20, 0x40},
//     // < (60)
//     {0x08, 0x10, 0x20, 0x40, 0x20, 0x10, 0x08},
//     // = (61)
//     {0x00, 0x00, 0xF8, 0x00, 0xF8, 0x00, 0x00},
//     // > (62)
//     {0x40, 0x20, 0x10, 0x08, 0x10, 0x20, 0x40},
//     // ? (63)
//     {0x70, 0x88, 0x08, 0x10, 0x20, 0x00, 0x20},
//
//     // @ (64) - irrelevant
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
//
//     // Großbuchstaben A-Z (65-90) - WICHTIG für Schach!
//     {0x20, 0x50, 0x88, 0x88, 0xF8, 0x88, 0x88}, // A
//     {0xF0, 0x88, 0x88, 0xF0, 0x88, 0x88, 0xF0}, // B
//     {0x70, 0x88, 0x80, 0x80, 0x80, 0x88, 0x70}, // C
//     {0xF0, 0x88, 0x88, 0x88, 0x88, 0x88, 0xF0}, // D
//     {0xF8, 0x80, 0x80, 0xF0, 0x80, 0x80, 0xF8}, // E
//     {0xF8, 0x80, 0x80, 0xF0, 0x80, 0x80, 0x80}, // F
//     {0x70, 0x88, 0x80, 0xB8, 0x88, 0x88, 0x70}, // G
//     {0x88, 0x88, 0x88, 0xF8, 0x88, 0x88, 0x88}, // H
//     {0x70, 0x20, 0x20, 0x20, 0x20, 0x20, 0x70}, // I
//     {0x38, 0x10, 0x10, 0x10, 0x10, 0x90, 0x60}, // J
//     {0x88, 0x90, 0xA0, 0xC0, 0xA0, 0x90, 0x88}, // K
//     {0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0xF8}, // L
//     {0x88, 0xD8, 0xA8, 0xA8, 0x88, 0x88, 0x88}, // M
//     {0x88, 0xC8, 0xA8, 0x98, 0x88, 0x88, 0x88}, // N
//     {0x70, 0x88, 0x88, 0x88, 0x88, 0x88, 0x70}, // O
//     {0xF0, 0x88, 0x88, 0xF0, 0x80, 0x80, 0x80}, // P
//     {0x70, 0x88, 0x88, 0x88, 0xA8, 0x90, 0x68}, // Q
//     {0xF0, 0x88, 0x88, 0xF0, 0xA0, 0x90, 0x88}, // R
//     {0x70, 0x88, 0x80, 0x70, 0x08, 0x88, 0x70}, // S
//     {0xF8, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20}, // T
//     {0x88, 0x88, 0x88, 0x88, 0x88, 0x88, 0x70}, // U
//     {0x88, 0x88, 0x88, 0x88, 0x88, 0x50, 0x20}, // V
//     {0x88, 0x88, 0x88, 0xA8, 0xA8, 0xD8, 0x88}, // W
//     {0x88, 0x88, 0x50, 0x20, 0x50, 0x88, 0x88}, // X
//     {0x88, 0x88, 0x88, 0x50, 0x20, 0x20, 0x20}, // Y
//     {0xF8, 0x08, 0x10, 0x20, 0x40, 0x80, 0xF8}, // Z
//
//     // [ (91)
//     {0x70, 0x40, 0x40, 0x40, 0x40, 0x40, 0x70},
//     // \ (92)
//     {0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02},
//     // ] (93)
//     {0x70, 0x10, 0x10, 0x10, 0x10, 0x10, 0x70},
//     // ^ (94)
//     {0x20, 0x50, 0x88, 0x00, 0x00, 0x00, 0x00},
//     // _ (95)
//     {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8},
//
//     // ` (96)
//     {0x40, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00},
//
//     // Kleinbuchstaben a-f (97-102)
//     {0x00, 0x00, 0x70, 0x08, 0x78, 0x88, 0x78}, // a
//     {0x80, 0x80, 0xF0, 0x88, 0x88, 0x88, 0xF0}, // b
//     {0x00, 0x00, 0x70, 0x88, 0x80, 0x88, 0x70}, // c
//     {0x08, 0x08, 0x78, 0x88, 0x88, 0x88, 0x78}, // d
//     {0x00, 0x00, 0x70, 0x88, 0xF8, 0x80, 0x70}, // e
//     {0x30, 0x48, 0x40, 0xE0, 0x40, 0x40, 0x40}  // f
//     // Restliche Kleinbuchstaben können später hinzugefügt werden
// };

}